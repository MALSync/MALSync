<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="fEjK72S42_4AimaYyQ8wWa5AUlkfZBvPTDDlFQPg7uw" />
		<title>MyAnimeList Sync</title>
    <meta name="description" content="Integrates MyAnimeList into various sites, with auto episode tracking." />
		<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
		<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
		<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <script type="text/javascript">
      // Single Page Apps for GitHub Pages
      // https://github.com/rafrex/spa-github-pages
      // Copyright (c) 2016 Rafael Pedicini, licensed under the MIT License
      // ----------------------------------------------------------------------
      // This script checks to see if a redirect is present in the query string
      // and converts it back into the correct url and adds it to the
      // browser's history using window.history.replaceState(...),
      // which won't cause the browser to attempt to load the new url.
      // When the single page app is loaded further down in this file,
      // the correct url will be waiting in the browser's history for
      // the single page app to route accordingly.
      (function(l) {
        if (l.search) {
          var q = {};
          l.search.slice(1).split('&').forEach(function(v) {
            var a = v.split('=');
            q[a[0]] = a.slice(1).join('=').replace(/~and~/g, '&');
          });
          if (q.p !== undefined) {
            window.history.replaceState(null, null,
              l.pathname.slice(0, -1) + (q.p || '') +
              (q.q ? ('?' + q.q) : '') +
              l.hash
            );
          }
        }
      }(window.location))
    </script>
    <script type="text/javascript">
      var changelogData = [
        {
          title: '0.3.1',
          data: [
            '[BUGFIX] Fix mangarock implementation not loading when starting from the homepage',
            '[TASK] Clean up overview page UI',
            '[TASK] Add Mangarock and Animeheaven database request support',
            '[TASK] Add welcome message',
            '[TASK] Change "Add to Mal?" dialog',
          ]
        },
        {
          title: '0.3.0',
          data: [
            '[FEATURE] Add <a target="_blank" href="https://mangarock.com">Mangarock</a>',
            '[FEATURE] Add <a target="_blank" href="http://animeheaven.eu">AnimeHeaven</a>',
            '[BUGFIX] Use a higher resolution version of the questionmark placeholder on MAL',
            '[FEATURE] Show estimation to next episode in miniMAL',
            '[TASK] Display the last time update check was executed',
          ]
        },
        {
          title: '0.2.14',
          data: [
            '[TASK] Add gogoanimes.co support',
            '[BUGFIX] Fix gogoanime updatecheck',
            '[FEATURE] Add update notification',
            '[FEATURE] Add watching state tags to person and character MAL pages',
            '[BUGFIX] Fix related watching state tags not showing sometimes',
            '[TASK] Add github and changelog badges to miniMAL #22',
            '[BUGFIX] Fix wrong next episode links on gogoanime',
          ]
        },
        {
          title: '0.2.13',
          data: [
            '[FEATURE] Add statuses in related Anime on mal',
            '[FEATURE] Notification Service',
            '[FEATURE] Add userscript mode to webextension',
            '[FEATURE] Add resume watching option #14',
            '[BUGFIX] Missing prediction when no mal-sync tag #20'
          ]
        },
        {
          title: '0.2.12',
          data: [
            '[BUGFIX] Firefox reverting update check to off',
            '[TASK] Extend update check debugging page',
            '[TASK] Save offset values to sync storage',
            '[BUGFIX] Fix miniMAL bookmarks showing wrong episode prediction'
          ]
        },
        {
          title: '0.2.11',
          data: [
            '[FEATURE] Check for new episodes and notify the user'
          ]
        },
        {
          title: '0.2.10',
          data: [
            '[FEATURE] Lazyload miniMAL bookmarks images',
            '[FEATURE] Autoupdate epPrediction on mal detail pages',
            '[TASK] Add update ui for manga in miniMAL',
            '[TASK] Change fail message to update failed',
            '[BUGFIX] Extend next chapter recognition for mangadex',
            '[BUGFIX] Check for mal-sync tags before checking for kal tags'
          ]
        },
        {
          title: '0.2.9',
          data: [
            '[BUGFIX] Episode sync not working',
          ]
        },
        {
          title: '0.2.8',
          data: [
            '[FEATURE] Show link to next episode on overview page',
            '[FEATURE] Add cruchyroll season to every link',
            '[TASK] Replace help icons in miniMAL',
            '[BUGFIX] Force hide continue watching links'
          ]
        },
        {
          title: '0.2.7',
          data: [
            '[FEATURE] Add delay option',
            '[FEATURE] Add option to deactivate the episode prediction',
            '[BUGFIX] Use reading in texts for manga',
            '[BUGFIX] Fix miniMAL popup size for firefox nightly'
          ]
        },
        {
          title: '0.2.6',
          data: [
            '[FEATURE] Switch confirm to flashConfirm',
            '[TASK] Hopefully fix miniMAL not loading in firefox nightly'
          ]
        },
        {
          title: '0.2.5',
          data: [
            '[FEATURE] Add episode prediction',
            '[FEATURE] Enlarge thumbnails on character, people and search pages',
            '[TASK] Add the possibility to deactivate saving urls to MAL tags',
            '[BUGFIX] Fix MAL Search returning no results',
            '[BUGFIX] Fix firefox popup too small'
          ]
        },
        {
          title: '0.2.4',
          data: [
            '[TASK] Bugfixes',
            '[TASK] Set miniMAL popup height to 600px',
            '[FEATURE] Add databaseRequest'
          ]
        },
        {
          title: '0.2.3',
          data: [
            '[BUGFIX] Handle alternative MAL url',
            '[TASK] Update badges'
          ]
        },
        {
          title: '0.2.2',
          data: [
            '[BUGFIX] miniMAL form update not working',
            '[BUGFIX] Crunchyroll video page not working in firefox'
          ]
        },
        {
          title: '0.2.1',
          data: [
            '[BUGFIX] Firefox not loading',
          ]
        },
        {
          title: '0.2.0',
          data: [
            '[FEATURE] Use extensions sync storage',
            '[FEATURE] Support classic animelists',
            '[FEATURE] Add clear cache',
            '[FEATURE] Add Streaming links to miniMAL'
          ]
        },
        {
          title: '0.1.7',
          data: [
            '[FEATURE] Show currently viewed anime in miniMAL popup',
            '[FEATURE] Display bookmarks in miniMAL if no active anime'
          ]
        },
        {
          title: '0.1.6',
          data: [
            '[FEATURE] Add Gogoanime',
            '[FEATURE] Add manual tracking',
            '[TASK] Finish page search',
            '[BUGFIX] Fix mal bookmarks not loading with slow network'
          ]
        },
        {
          title: '0.1.5',
          data: [
            '[FEATURE] Add continue watching links to miniMAL bookmarks',
            '[FEATURE] Add miniMAL information block',
            '[FEATURE] Add miniMAL reviews tab',
            '[FEATURE] Add miniMAL recommendations tab'
          ]
        },
        {
          title: '0.1.4',
          data: [
            '[FEATURE] Add Masteranime',
            '[FEATURE] Add Mangadex',
            '[FEATURE] Add continue watching to miniMAL',
            '[FEATURE] Add ep/status/rating UI to miniMAL'
          ]
        },
        {
          title: '0.1.3',
          data: [
            'Initial Release'
          ]
        }
      ];
    </script>
	</head>
  <body style="background: linear-gradient(to bottom, #032e45 0%,#9b7c91 100%);">
  	<div id="sidebar">
  		<div id="sidebar-inner">
  			<div id="header-inner" style="width: 100%; height: 100%; display: none;">
  				<div id="open-home" style="display: inline-block; color: white; line-height: 30px; padding: 0 10px; cursor: pointer;">
            <div class="loader2-div">
              <div class="loader2"></div>
            </div>
  				</div>
  				<div id="open-changelog" style="display: inline-block; color: white; line-height: 30px; padding: 0 10px; cursor: pointer;">
  					Changelog
  				</div>
  			</div>
  		</div>
  	</div>
  	<div class="navbar-light mobile-nav" style="height: 0; overflow: hidden;">
  		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation">
  		  <span class="navbar-toggler-icon"></span>
  		</button>
  	</div>
  	<div id="content" class="container">
  	<noscript>
  		<div class="page noscript">
			<p style="color: white;">Please enable JavaScript.</p>
			<style>
				#loading{
					display: none;
				}
			</style>
  		</div>
  	</noscript>
  	<div class="page-visibility center-wrap" id="loading">
    	<div class="loader"></div>
	</div>
	<div class="page center-wrap" id="home" style="display: none;">
	   	<div class="card text-center" style="
	   		border: 0;
	   		background-color: black;
	   		background-color: #0000001f;
	   		color: white;
	   		position: absolute;
	   		white-space: nowrap;
    		top: 50%;
    		left: 50%;
    		transform: translate(-50%, -50%);
    	">
	   	<div class="card-body">
	   	    <h1 class="card-title">MAL-Sync</h1>
	   	    <h2 class="card-text" style="font-size: 1rem; font-weight: 100; line-height: 1.5;">Integrates MyAnimeList into various sites, with auto episode tracking.</h2>
	   	    <br/>
	   	    <a href="https://github.com/lolamtisch/MALSync#readme" class="btn btn-primary">Github</a>
	   	  </div>
	   	</div>
	</div>
	<div class="page" id="changelog" style="display: none;">
		<div id="changelog-content" class="container">
		</div>
	</div>
	</div>
	<canvas id="starCanvas" style="position: fixed; top: 0; left: 0; z-index: -1;">
	</canvas>
	<script type="text/javascript">
		var canvas = document.getElementById("starCanvas");
		var stars = [];
		var fps = 60;
		var frame = 0;
		var remainingScroll = 0;
		var running = 0;
		initStars();
		window.onresize = function() {
		  initStars();
		}
		var scrollTop = (window.pageYOffset !== undefined) ? window.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop;
		window.onscroll = function() {
			var scrollTopTemp = (window.pageYOffset !== undefined) ? window.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop;
			var scrollDistance = scrollTop - scrollTopTemp;
			scrollTop = scrollTopTemp;


			remainingScroll += scrollDistance;
		}
		function initStars(){
			canvas.width = document.body.clientWidth;
			canvas.height = document.body.clientHeight;
			var ctx = canvas.getContext("2d");

			if(!stars.length){
				for(var i = 0; i < 100; i++){
					var star = new Star();
					star.init();
					stars.push(star);
				}
			}else{
				for (var star of stars) {
					star.init();
				}
			}
			drawStars();
			if(!running){
				//setInterval(animate, 1000 / fps);
				requestAnimationFrame(animate);
				running++;
			}
			var speed = 0;
			function animate(){
				//console.log(speed);
				if(remainingScroll < 10 && remainingScroll > -10){
					speed = speed - 0.05;
					if(speed < 0) speed = 0;
				}else{
					speed = speed + 0.1;
					if(speed > 4) speed = 4;
					var scrollDistance = remainingScroll / (fps * 0.1);
					remainingScroll = remainingScroll - scrollDistance;
				}

				if(remainingScroll < 0){
					scrollDistance = 0 - speed;
				}else{
					scrollDistance = speed;
				}

				for (var star of stars) {
					star.animate();
					star.offset(0, scrollDistance/star.paralaxLevel);
				}
				drawStars();
				requestAnimationFrame(animate);
			}
			function drawStars(){
				frame++;
				ctx.clearRect(0, 0, canvas.width, canvas.height);
				ctx.moveTo(0, 0);
				ctx.fillStyle="white";

				for (var star of stars) {
					ctx.fillRect(
						star.x,
						star.y,
						star.size,
						star.size
					);
				}
				ctx.stroke();
			}
		}

		function Star() {
			this.x = 0;
			this.y = 0;
			this.xSpeed = 0;
			this.ySpeed = 0;
			this.size = 1;
			this.paralaxLevel = 1;
			this.init = function(){
				this.x = Math.floor(Math.random() * canvas.width);
				this.y = Math.floor(Math.random() * canvas.height);
				this.size = Math.ceil(Math.random() * 3);
				var maxSpeed = 0.08/this.size;
				this.xSpeed = (Math.random() * (maxSpeed*2))-maxSpeed;
				this.ySpeed = (Math.random() * (maxSpeed*2))-maxSpeed;
				this.paralaxLevel = Math.ceil(Math.random() * 5)+3;
			}
			this.animate = function(){
				var maxSpeed = 0.08/this.size;
				if (frame % 100 == 99) {
					this.xSpeed += (Math.random() * 0.0004)-0.0002;
					this.ySpeed += (Math.random() * 0.0004)-0.0002;
				}
				if(this.xSpeed > maxSpeed){
					this.xSpeed = maxSpeed;
				}else if(this.xSpeed < (maxSpeed * -1)){
					this.xSpeed = maxSpeed * -1;
				}

				if(this.ySpeed > maxSpeed){
					this.ySpeed = maxSpeed;
				}else if(this.ySpeed < (maxSpeed * -1)){
					this.ySpeed = maxSpeed * -1;
				}
				//
				this.y += this.ySpeed;
				this.x += this.xSpeed;
				if(this.x > canvas.width){
					this.x += (canvas.width * -1)
				}else if(this.x < 0){
					this.x += canvas.width
				}
				if(this.y > canvas.height){
					this.y += (canvas.height * -1)
				}else if(this.y < 0){
					this.y += canvas.height
				}
			}
			this.offset = function(xOff, yOff){
				this.y += yOff;
				this.x += xOff;
			}
		}

		window.requestAnimFrame = (function(){
		  return  window.requestAnimationFrame       ||
		          window.webkitRequestAnimationFrame ||
		          window.mozRequestAnimationFrame    ||
		          function( callback ){
		            window.setTimeout(callback, 1000 / 60);
		          };
		})();
	</script>
  </body>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js'></script>
  <link rel="stylesheet" type="text/css" href="bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="main.css">
  <script src='bootstrap.min.js'></script>
  <script src='notification.js'></script>
</html>
